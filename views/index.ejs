<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Gestor de Tareas</title>
  <link rel="stylesheet" href="/styles.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body class="app-body">
  <header class="app-header">
    <div class="app-header__logo">
      <div class="logo-icon">
        <span class="logo-icon__calendar">ğŸ“…</span>
        <span class="logo-icon__clock">â°</span>
      </div>
      <div>
        <h1>Gestor de Tareas</h1>
        <p class="app-header__subtitle">
          Organiza por nivel de importancia y fecha lÃ­mite
        </p>
      </div>
    </div>
  </header>

  <main class="app-main">
    <!-- FORMULARIO NUEVA TAREA -->
    <section class="card card--form">
      <h2>Nueva tarea</h2>
      <form action="/add" method="POST" class="task-form">
        <div class="form-row">
          <label>
            TÃ­tulo
            <input type="text" name="title" required />
          </label>
        </div>

        <div class="form-row">
          <label>
            DescripciÃ³n
            <textarea name="description" rows="3"></textarea>
          </label>
        </div>

        <div class="form-row form-row--two">
          <label>
            Lista
            <select name="list">
              <option value="general">General</option>
              <option value="work">Trabajo</option>
            </select>
          </label>

          <label>
            Nivel de importancia
            <select name="priority" required>
              <option value="1">1 - CrÃ­tico</option>
              <option value="2">2 - Alto</option>
              <option value="3" selected>3 - Medio</option>
              <option value="4">4 - Bajo</option>
              <option value="5">5 - Muy bajo</option>
            </select>
          </label>
        </div>

        <div class="form-row form-row--two">
          <label>
            Fecha lÃ­mite (opcional)
            <div class="input-with-icon">
              <span class="input-icon">ğŸ“…</span>
              <input type="date" name="deadline" />
            </div>
          </label>

          <label>
            Tiempo estimado (minutos, opcional)
            <div class="input-with-icon">
              <span class="input-icon">â±ï¸</span>
              <input type="number" name="estimatedDuration" min="1" />
            </div>
          </label>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn btn--primary">
            â• Agregar tarea
          </button>
        </div>
      </form>
    </section>

    <!-- FILTROS DE ORDENACIÃ“N -->
    <section class="card card--filters">
      <h2>Ordenar tareas</h2>
      <p class="filters-help">
        Elige cÃ³mo quieres ver tus tareas:
      </p>
      <div class="chip-group">
        <a
          href="/?sortBy=importance"
          class="chip <%= sortBy === 'importance' ? 'chip--active' : '' %>"
        >
          â­ Por importancia
          <span class="chip__subtitle">
            (prioridad de 1 = mÃ¡s importante)
          </span>
        </a>

        <a
          href="/?sortBy=deadline"
          class="chip <%= sortBy === 'deadline' ? 'chip--active' : '' %>"
        >
          ğŸ“… Por fecha lÃ­mite
          <span class="chip__subtitle">
            (tareas con fecha mÃ¡s cercana primero)
          </span>
        </a>

        <a
          href="/"
          class="chip <%= !sortBy ? 'chip--active' : '' %>"
        >
          ğŸ”„ Sin orden especial
        </a>
      </div>
    </section>

    <!-- LISTA GENERAL -->
    <section class="card">
      <h2>Lista General</h2>

      <% if (generalTasks.length === 0) { %>
        <p class="empty-text">AÃºn no hay tareas en la lista General.</p>
      <% } else { %>
        <ul class="task-list">
          <% generalTasks.forEach(function(task) { %>
            <li class="task-item">
              <div class="task-main">
                <h3 class="task-title"><%= task.title %></h3>
                <% if (task.description) { %>
                  <p class="task-desc"><%= task.description %></p>
                <% } %>
                <div class="task-meta">
                  <span class="badge">
                    Prioridad: <%= task.priority %>
                  </span>
                  <% if (task.deadline) { %>
                    <span class="badge badge--date">
                      Fecha lÃ­mite:
                      <%= new Date(task.deadline).toLocaleDateString("es-ES") %>
                    </span>
                  <% } %>
                  <% if (task.estimatedDuration) { %>
                    <span class="badge">
                      ~ <%= task.estimatedDuration %> min
                    </span>
                  <% } %>
                </div>
              </div>

              <form action="/delete" method="POST" class="task-delete-form">
                <input type="hidden" name="id" value="<%= task._id %>" />
                <input type="hidden" name="list" value="general" />
                <button type="submit" class="btn btn--danger">ğŸ—‘ï¸ Eliminar</button>
              </form>
            </li>
          <% }); %>
        </ul>
      <% } %>
    </section>

    <!-- LISTA TRABAJO -->
    <section class="card">
      <h2>Lista Trabajo</h2>

      <% if (workTasks.length === 0) { %>
        <p class="empty-text">AÃºn no hay tareas en la lista Trabajo.</p>
      <% } else { %>
        <ul class="task-list">
          <% workTasks.forEach(function(task) { %>
            <li class="task-item">
              <div class="task-main">
                <h3 class="task-title"><%= task.title %></h3>
                <% if (task.description) { %>
                  <p class="task-desc"><%= task.description %></p>
                <% } %>
                <div class="task-meta">
                  <span class="badge">
                    Prioridad: <%= task.priority %>
                  </span>
                  <% if (task.deadline) { %>
                    <span class="badge badge--date">
                      Fecha lÃ­mite:
                      <%= new Date(task.deadline).toLocaleDateString("es-ES") %>
                    </span>
                  <% } %>
                  <% if (task.estimatedDuration) { %>
                    <span class="badge">
                      ~ <%= task.estimatedDuration %> min
                    </span>
                  <% } %>
                </div>
              </div>

              <form action="/delete" method="POST" class="task-delete-form">
                <input type="hidden" name="id" value="<%= task._id %>" />
                <input type="hidden" name="list" value="work" />
                <button type="submit" class="btn btn--danger">ğŸ—‘ï¸ Eliminar</button>
              </form>
            </li>
          <% }); %>
        </ul>
      <% } %>
    </section>
  </main>
</body>
</html>


    